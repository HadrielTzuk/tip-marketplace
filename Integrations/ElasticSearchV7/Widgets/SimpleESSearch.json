{
  "type": 3,
  "actionIdentifier": "Simple ES Search",
  "title": "ElasticSearchV7 - Simple ES Search",
  "description": "This widget highlights the most important items in ElasticSearchV7 - Simple ES Search.",
  "dataDefinition":
  {
    "htmlContent": "<!DOCTYPE html><html lang=\"en\"><head> <meta charset=\"UTF-8\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i\" rel=\"stylesheet\"> <script src=\"https://code.jquery.com/jquery-3.5.1.min.js\"></script> <title>Query Widget</title> <style>body{float: left; width: 100%; padding: 0; margin: 0; box-sizing: border-box; background-color: #212C45;}.widget-container{padding: 0 20px;}::-webkit-scrollbar{width: 0;}.logo{text-align: right; padding-top: 8px; padding-bottom: 8px;}.logo svg{vertical-align: top;}.notable{overflow-x: auto;}.notable table{width: 100%; margin-left: 0; margin-right: 0;}.notable table tr th{white-space: nowrap; min-width: 100px;}.notable table tr th{text-align: left; border-bottom: 1px solid #576B95; border-top: 1px solid #576B95; padding: 10px; font-weight: bold;}table{margin: 22px 2%; width: 96%; border-collapse: collapse; word-break: break-word;}.playbook table tr td{line-height: 16px; text-align: left; border-bottom: 1px solid #576B95; padding: 10px; color: #C3D2E8;}.MainCounter{display: flex; justify-content: center; align-items: center; padding: 32px 4% 36px 4%; text-align: center;}h1{font-weight: bold; font-size: 104px; text-shadow: 1px 1px #fff; margin: 0;}h3{font-weight: bold; font-size: 26px; margin: 0; text-align: center;}.longText{width: 20vw; cursor: pointer;}.longText-hidden{white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}</style></head><body style=\"font-family: Open Sans, serif; font-size: 14px; color: #fff\"><div class=\"widget-container\"><div class=\"logo\"> <svg class=\"logo-svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"currentColor\"> <path d=\"M18.688 17.792c-2.048-1.024-4.096-1.92-6.144-2.816-1.92 1.664-3.712 3.456-5.632 5.12-0.768 0.64-1.024 1.28-0.896 2.304 0 0.384 0.128 0.768 0.128 1.152 0.64 4.992 6.656 8.192 11.392 4.864 0.896-0.64 1.792-1.28 2.048-2.432 0.256-0.896 0.256-1.92 0.512-2.688 0.512-1.664 0.384-3.2-0.64-4.608-0.256-0.384-0.512-0.768-0.768-0.896zM13.312 14.208c1.792 0.896 3.712 1.664 5.504 2.56 0.384 0.128 0.512 0.128 0.768-0.128 1.92-1.664 3.712-3.328 5.632-4.992 0.512-0.384 0.64-0.896 0.768-1.408 0.256-4.608-3.584-7.936-7.424-7.808-1.792-0.128-3.328 0.64-4.736 1.664-0.768 0.64-1.28 1.408-1.536 2.56-0.128 1.024-0.128 1.152-0.256 1.792-0.384 1.792-0.64 3.456 0.512 4.992 0.256 0.256 0.512 0.64 0.768 0.768zM26.496 12.032c-2.048 1.792-4.096 3.584-6.144 5.376-0.128 0.128-0.128 0.384-0.128 0.64 0.256 0.64 0.64 1.28 0.896 1.92 0.128 0.128 0.384 0.384 0.512 0.384 1.408 0.384 2.816 0.64 4.352 1.024 0.128 0 0.384 0 0.512 0 1.792-0.64 3.2-2.432 3.2-4.48 0.128-2.432-1.152-3.968-3.2-4.864zM11.648 14.080c0.128-0.512-0.512-1.28-0.768-1.792-0.256-0.384-0.512-0.64-0.896-0.64-1.28-0.384-2.432-0.64-3.712-0.896-0.384-0.128-0.768-0.128-1.024 0-1.92 0.896-2.944 2.432-3.072 4.608 0.128 2.048 1.024 3.584 2.816 4.48 0.128 0.128 0.512 0 0.64-0.128 1.536-1.408 3.072-2.688 4.608-4.096 0.512-0.512 1.28-1.024 1.408-1.536zM25.6 22.272c-1.152-0.256-2.432-0.64-3.584-0.896-0.384-0.128-0.64 0-0.64 0.512-0.256 1.536-0.512 2.944-0.896 4.48 1.408 1.024 2.816 1.024 4.224 0.128 1.28-0.768 1.792-2.432 1.408-3.84-0.128-0.128-0.384-0.384-0.512-0.384zM6.528 9.728c1.28 0.256 2.56 0.64 3.968 0.896 0.384-1.664 0.768-3.2 1.024-4.864 0-0.128-0.128-0.384-0.384-0.512-1.152-0.768-2.304-0.768-3.584 0-1.152 0.768-1.792 1.792-1.664 3.2 0 0.512-0.128 1.152 0.64 1.28z\"/> </svg></div><div class=\"MainCounter\" > <div> <h1 id=\"count\"></h1> <div class=\"simi-alerts \"> <div> <h3 id=\"alerts-title\"></h3> </div></div></div></div><div class=\"playbook notable\"> <table> <thead id=\"fieldHeaders\"></thead> <tbody id=\"fieldData\"></tbody> </table></div></div><script>$(document).ready(()=>{const actionListData=[{stepInstanceName}.JsonResult]; if (!actionListData.length){return;}const dataCount=actionListData.length; if (dataCount===1){$(\"#alerts-title\").html(\"RESULT FOUND\");}else{$(\"#alerts-title\").html(\"RESULTS FOUND\");}$(\"#count\").html(dataCount); const iterListData=actionListData; const tableMapping={}; for (const item of iterListData){for (const key of Object.keys(item)){if (tableMapping[key]===undefined){tableMapping[key]=[];}}}for (const [heading, dataArray] of Object.entries(tableMapping)){for (const item of iterListData){dataArray.push(fieldExists(item[heading]));}}const initialValue=\"\"; const keys=Object.keys(tableMapping); const headerHTML=`<tr>${keys.map( key=> key.toString() .replace(/^[-_]*(.)/, (_, c)=> c.toUpperCase()) .replace(/[-_]+(.)/g, (_, c)=> \" \" + c.toUpperCase()) ).reduce((headerString, key)=> headerString + `<th>${key}</th>`, initialValue)}</tr>`; const tableColumns=Object.values(tableMapping); // Transposing from columns to rows const tableRows=tableColumns[0].map((col, i)=> tableColumns.map(row=> row[i])); const isObject=obj=> obj && obj.constructor===({}).constructor; const bodyHTML=tableRows.reduce( (tableRows, tableRowArray)=> tableRows + `<tr>${tableRowArray.reduce( (dataCells, dataCell)=>{if (Array.isArray(dataCell)){dataCell=dataCell .map(item=> isObject(item) ? JSON.stringify(item, null, 4) : item) .join(\", \");}else if (isObject(dataCell)){dataCell=JSON.stringify(dataCell, null, 4);}return dataCells + `<td>${createLongTextCeil(dataCell ? dataCell.toString() : \"\")}</td>`;}, initialValue )}</tr>`, initialValue ); $(\"#fieldHeaders\").html(headerHTML); $(\"#fieldData\").html(bodyHTML); $(\"th\").each(function(idx, _){const check=Boolean( $(\"tbody tr\").find(\"td:eq(\" + idx + \")\").filter(function(){return $.trim($(this).text())===\"N/A\" ? 0 : 1;}).length ); $(\"tr\").find(\"td:eq(\" + idx + \"), th:eq(\" + idx + \")\").toggle(check);}); function fieldExists(field){return field===undefined ? \"N/A\" : field;}addLongTextClickLogic(); function createLongTextCeil(text){if (!text){return text;}const firstPart=text.slice(0, 250); const secondPart=text.slice(250); const className='longText'; const hiddenClassName=`${className}-hidden`; return `<div class=\"${className}\">${firstPart}</div><div class=\"${className}${hiddenClassName}\">${secondPart}</div>`;}function addLongTextClickLogic(){$('.longText').click(event=>{const classList=event.target.classList; const nextSibling=event.target.nextElementSibling; const nextSiblingClassList=event.target.nextElementSibling?.classList; const className=\"longText\"; const hiddenClassName=`${className}-hidden`; if (nextSibling){if (nextSiblingClassList.contains(hiddenClassName)){nextSiblingClassList.remove(hiddenClassName);}else{nextSiblingClassList.add(hiddenClassName);}}else{if (classList.contains(hiddenClassName)){classList.remove(hiddenClassName);}else{classList.add(hiddenClassName);}}});}});</script></body></html>",
    "htmlHeight": 400,
    "safeRendering": false,
    "type": 3,
    "widgetDefinitionScope": 2
  },
  "conditionsGroup": {
    "conditions": [
      {
        "value": "[]",
        "fieldName": "[{stepInstanceName}.results]",
        "matchType": 5
      }
    ],
    "logicalOperator": 0
  },
  "defaultSize": 1
}
